<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Journal App</title>
    <style>
      .hidden {
        display: none;
      }

      input[type="text"],
      input[type="number"],
      textarea {
        width: 400px;
      }
      .bold {
        font-weight: bold;
      }
    </style>
  </head>

  <body>
    <!-- Form Section -->
    <form id="journalForm">
      Date: <input type="date" id="date" /> Time:
      <input type="time" id="time" />
      <button type="button" onclick="setCurrentDateTime()">
        Set Current Date & Time</button
      ><br />

      Weight: <input type="number" id="weight" value="175" step="0.5" /><br />

      How was your sleep?
      <select id="sleep">
        <!-- options here -->

        <option value="good">Good</option>
        <option value="decent">Decent</option>
        <option value="ok">Ok</option>
        <option value="bad">Bad</option>
        <option value="insomnia">Insomnia</option>
        <option value="bad insomnia">Bad Insomnia</option></select
      ><br />
      Any dreams or Sleep Comments?
      <select id="dreams" onchange="toggleDreamDesc()">
        <option value="no">No</option>
        <option value="yes">Yes</option>
      </select>
      How many hours did you sleep?
      <input
        type="number"
        id="sleepHours"
        value="7"
        min="0"
        step="0.5"
      /><br /><br />
      <textarea
        id="dreamDesc"
        class="hidden"
        placeholder="Describe your dream"
      ></textarea
      ><br />
      What's something(s) you learned yesterday?
      <input type="text" id="learned" /><br />
      What are you excited to explore today?
      <input type="text" id="exploreToday" /><br />
      2 things you are grateful for?
      <input type="text" id="gratefulFor" /><br />

      <br />

      Left foot pain?
      <input type="checkbox" id="leftFoot" />Yes
      <select id="leftFootSeverity" class="hidden">
        <option value="mild">Mild</option>
        <option value="moderate">Moderate</option>
        <option value="severe">Severe</option></select
      ><br />

      Lower back pain?
      <input type="checkbox" id="lowerBack" />Yes
      <select id="lowerBackSeverity" class="hidden">
        <option value="mild">Mild</option>
        <option value="moderate">Moderate</option>
        <option value="severe">Severe</option></select
      ><br />

      Comments/Other ailments?
      <input
        type="checkbox"
        id="otherAilment"
        onchange="toggleOtherAilmentDesc()"
      />Yes
      <textarea
        id="otherAilmentDesc"
        class="hidden"
        placeholder="Comment / or Describe the other ailment"
      ></textarea
      ><br />
      <br />
      Whose got what you want out of life? (a Hero -or- someone you're jealous
      of)
      <input type="text" id="jealousGoalPerson" /><br />
      What do they have that you don't?
      <input type="text" id="jealousGoal" /><br />
      <br />

      What do YOU want out of life? <input type="text" id="lifeGoal" /><br />
      <br />
      What do you NOT want out of life?
      <input type="text" id="notLifeGoal" /><br />
      What's the opposite of that? <input type="text" id="oppositeGoal" /><br />
      What will you do to assure that happens?
      <input
        type="text"
        id="avoidNotLifeGoalAction"
        onchange="updateAssuranceAction()"
      /><br />
      <br />

      Action plan for the year: <input type="text" id="yearPlan" /><br />
      Action plan for the next six months:
      <input type="text" id="sixMonthPlan" /><br />
      Action plan for the next six weeks:
      <input type="text" id="sixWeekPlan" /><br />
      <br />
      Action plan for the next six days:
      <input type="text" id="sixDayPlan" /><br />
      <br />
      Action plan for today: <input type="text" id="todayPlan" /><br />
      To assure <span id="actionTodayPlaceholder">that</span> happens today/and
      other thougts/stream of consciousness:
      <input type="text" id="avoidTodayIssue" /><br />
      <br />

      <button type="button" onclick="generateSummary()">
        Generate Journal Entry
      </button>
    </form>

    <!-- Summary Section -->
    <div id="summary"></div>
    <br />

    <!-- Button for Copying to Clipboard -->
    <button onclick="copyToClipboard()">Copy to Clipboard</button>

    <!-- Hyperlink for Google Doc -->
    <a
      href="https://docs.google.com/document/d/1t3scUaamoUVePAFUhf-3TcneOlUXA3TKnnofHjS394c/edit?usp=sharing"
      target="_blank"
      >Open Google Doc</a
    >

    <script>
      function toggleDreamDesc() {
        const dreamSelector = document.getElementById("dreams");
        const dreamDesc = document.getElementById("dreamDesc");
        if (dreamSelector.value === "yes") {
          dreamDesc.classList.remove("hidden");
        } else {
          dreamDesc.classList.add("hidden");
        }
      }

      function toggleOtherAilmentDesc() {
        const otherAilmentCheckbox = document.getElementById("otherAilment");
        const otherAilmentDesc = document.getElementById("otherAilmentDesc");
        if (otherAilmentCheckbox.checked) {
          otherAilmentDesc.classList.remove("hidden");
        } else {
          otherAilmentDesc.classList.add("hidden");
        }
      }

      document
        .getElementById("leftFoot")
        .addEventListener("change", function () {
          const leftFootSeverity = document.getElementById("leftFootSeverity");
          if (this.checked) {
            leftFootSeverity.classList.remove("hidden");
          } else {
            leftFootSeverity.classList.add("hidden");
          }
        });

      document
        .getElementById("lowerBack")
        .addEventListener("change", function () {
          const lowerBackSeverity =
            document.getElementById("lowerBackSeverity");
          if (this.checked) {
            lowerBackSeverity.classList.remove("hidden");
          } else {
            lowerBackSeverity.classList.add("hidden");
          }
        });

      function setCurrentDateTime() {
        const now = new Date();
        const year = now.getFullYear();
        const month = (now.getMonth() + 1).toString().padStart(2, "0");
        const day = now.getDate().toString().padStart(2, "0");
        document.getElementById("date").value = `${year}-${month}-${day}`;
        let hours = now.getHours();
        const minutes = now.getMinutes().toString().padStart(2, "0");
        const ampm = hours >= 12 ? "PM" : "AM";
        hours = hours % 12;
        hours = hours ? hours : 12;
        document.getElementById("time").value = `${hours
          .toString()
          .padStart(2, "0")}:${minutes}`;
      }

      function updateAssuranceAction() {
        const actionTodayPlaceholder = document.getElementById(
          "actionTodayPlaceholder"
        );
        actionTodayPlaceholder.textContent = document.getElementById(
          "avoidNotLifeGoalAction"
        ).value;
      }

      function generateSummary() {
        document.getElementById("journalForm").style.display = "none";
        const dateParts = document.getElementById("date").value.split("-");
        const formattedDate = `<strong>${dateParts[1]}/${dateParts[2]}/${dateParts[0]}</strong>`;

        const timeParts = document.getElementById("time").value.split(":");
        let hours = parseInt(timeParts[0]);
        const ampm = hours >= 12 ? "PM" : "AM";
        hours = hours % 12;
        hours = hours ? hours : 12;
        const formattedTime = `${hours}:${timeParts[1]} ${ampm}`;

        let summary = `<strong>→→→Journal for: ${formattedDate} ${formattedTime}←←←
</strong><br>\n`;

        summary += `Weight: ${
          document.getElementById("weight").value
        } lbs. <br>\n`;

        summary += `Sleep: ${document.getElementById("sleep").value}\n`;
        summary += `-- Duration: ${
          document.getElementById("sleepHours").value
        } hours<br>\n`;

        if (document.getElementById("dreams").value === "yes") {
          summary += `<br>Dream: ${
            document.getElementById("dreamDesc").value
          }\n`;
        }
        summary += `<br>\n<br>\n I learned   ${
          document.getElementById("learned").value
        }<br>\n`;
        summary += `I'm excited about  ${
          document.getElementById("exploreToday").value
        }<br>\n`;
        summary += `I'm enjoying  ${
          document.getElementById("gratefulFor").value
        }<br>\n<br>\n`;

        const ailments = [];
        if (document.getElementById("leftFoot").checked) {
          ailments.push(
            `Left foot pain (${
              document.getElementById("leftFootSeverity").value
            })`
          );
        }
        if (document.getElementById("lowerBack").checked) {
          ailments.push(
            `Lower back pain (${
              document.getElementById("lowerBackSeverity").value
            })`
          );
        }
        if (document.getElementById("otherAilment").checked) {
          ailments.push(document.getElementById("otherAilmentDesc").value);
        }
        if (ailments.length > 0) {
          summary += `my current Ailments are ${ailments.join(", ")}<br>\n`;
        }

        summary += `I'm becoming more known for ${
          document.getElementById("lifeGoal").value
        },`;
        summary += ` ${document.getElementById("jealousGoal").value}`;
        summary += ` and ${
          document.getElementById("oppositeGoal").value
        }<br>\n`;
        summary += `So, i  ${
          document.getElementById("avoidNotLifeGoalAction").value
        }<br>\n`;

        if (document.getElementById("yearPlan").value)
          summary += `Year plan: ${
            document.getElementById("yearPlan").value
          }<br>\n`;
        if (document.getElementById("sixMonthPlan").value)
          summary += `6-month plan: ${
            document.getElementById("sixMonthPlan").value
          }<br>\n`;
        if (document.getElementById("sixWeekPlan").value)
          summary += `6-week plan: ${
            document.getElementById("sixWeekPlan").value
          }<br>\n`;
        if (document.getElementById("sixDayPlan").value)
          summary += `6-day plan: ${
            document.getElementById("sixDayPlan").value
          }<br>\n<br>\n`;

        summary += `Today I will  ${
          document.getElementById("todayPlan").value
        }<br>\n`;
        summary += `as I  ${document.getElementById("avoidTodayIssue").value}`;

        document.getElementById("summary").innerHTML = `<div>${summary}</div>`;
      }

      function htmlToText(htmlContent) {
        const tempDiv = document.createElement("div");
        tempDiv.innerHTML = htmlContent;
        return tempDiv.textContent.replace(/\n/g, "\n\n");
      }

      function copyToClipboard() {
        const summaryDiv = document.getElementById("summary");
        const el = document.createElement("textarea");
        el.value = summaryDiv.innerText;
        document.body.appendChild(el);
        el.select();
        document.execCommand("copy");
        document.body.removeChild(el);
        //        alert("Copied to clipboard.");
      }

      // Automatically set current date & time when page loads
      setCurrentDateTime();
    </script>
  </body>
</html>
